{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"AdminChangePassword\",\n  data() {\n    return {\n      adminDto: {},\n      oldPassword: '',\n      newPassword: '',\n      confirmPassword: '',\n      form: {}\n    };\n  },\n  created() {\n    this.adminDto = JSON.parse(localStorage.getItem(\"admin\"));\n    if (this.admin === {}) {\n      this.$router.push(\"/login\");\n    }\n  },\n  methods: {\n    changeAdminPassword() {\n      if (this.newPassword === this.confirmPassword) {\n        this.form.id = this.adminDto.id;\n        this.form.oldPassword = this.oldPassword;\n        this.form.newPassword = this.newPassword;\n        this.request.post(\"/admin/changePassword\", this.form).then(res => {\n          if (res.code === '200') {\n            this.$message.success(\"修改成功\");\n            //退回到登录页面\n            localStorage.removeItem(\"admin\");\n            this.$router.push(\"/AdminLogin\");\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      } else {\n        this.$message.error(\"两次输入密码不一致\");\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";AAqBA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;IAEA;EACA;EACAC;IACA;IACA;MACA;IACA;EACA;EACAC;IACAC;MACA;QACA;QACA;QACA;QACA;UACA;YACA;YACA;YACAC;YACA;UACA,OACA;YACA;UACA;QACA;MACA,OACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","adminDto","oldPassword","newPassword","confirmPassword","form","created","methods","changeAdminPassword","localStorage"],"sourceRoot":"src/views/admin","sources":["ChangePassword.vue"],"sourcesContent":["<template>\r\n  <div style=\"width: 500px; padding: 20px; border: 1px solid #ccc\">\r\n    <el-form label-width=\"80px\" size=\"small\">\r\n\r\n      <el-form-item label=\"原密码\">\r\n        <el-input show-password v-model:label=\"oldPassword\" auto-complete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"新密码\">\r\n        <el-input show-password v-model:label=\"newPassword\" auto-complete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"确认密码\">\r\n        <el-input show-password v-model:label=\"confirmPassword\" auto-complete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"changeAdminPassword\">确 定</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"AdminChangePassword\",\r\n  data(){\r\n    return{\r\n      adminDto:{},\r\n      oldPassword:'',\r\n      newPassword:'',\r\n      confirmPassword:'',\r\n      form:{}\r\n\r\n    }\r\n  },\r\n  created() {\r\n    this.adminDto=JSON.parse(localStorage.getItem(\"admin\"))\r\n    if(this.admin==={}){\r\n      this.$router.push(\"/login\")\r\n    }\r\n  },\r\n  methods :{\r\n    changeAdminPassword(){\r\n      if(this.newPassword===this.confirmPassword) {\r\n        this.form.id=this.adminDto.id\r\n        this.form.oldPassword=this.oldPassword\r\n        this.form.newPassword=this.newPassword\r\n        this.request.post(\"/admin/changePassword\", this.form).then(res => {\r\n          if(res.code==='200'){\r\n            this.$message.success(\"修改成功\")\r\n            //退回到登录页面\r\n            localStorage.removeItem(\"admin\")\r\n            this.$router.push(\"/AdminLogin\")\r\n          }\r\n          else{\r\n            this.$message.error(res.msg)\r\n          }\r\n        })\r\n      }\r\n      else{\r\n        this.$message.error(\"两次输入密码不一致\")\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}