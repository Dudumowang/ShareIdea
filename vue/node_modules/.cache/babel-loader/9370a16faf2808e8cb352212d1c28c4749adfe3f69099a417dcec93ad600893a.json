{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"AdminChangePassword\",\n  data() {\n    return {\n      adminDto: {},\n      oldPassword: '',\n      newPassword: '',\n      confirmPassword: '',\n      form: {}\n    };\n  },\n  created() {\n    this.adminDto = JSON.parse(localStorage.getItem(\"admin\"));\n    if (this.admin === {}) {\n      this.$router.push(\"/login\");\n    }\n  },\n  methods: {\n    changeAdminPassword() {\n      if (this.newPassword === this.confirmPassword) {\n        this.form.id = this.adminDto.id;\n        this.form.oldPassword = this.oldPassword;\n        this.form.newPassword = this.newPassword;\n        this.request.post(\"http://localhost:9090/admin/changePassword\", this.form).then(res => {\n          if (res.code === '200') {\n            this.$message.success(\"修改成功\");\n            //退回到登录页面\n            localStorage.removeItem(\"admin\");\n            this.$router.push(\"/AdminLogin\");\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      } else {\n        this.$message.error(\"两次输入密码不一致\");\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";AAqBA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;IAEA;EACA;EACAC;IACA;IACA;MACA;IACA;EACA;EACAC;IACAC;MACA;QACA;QACA;QACA;QACA;UACA;YACA;YACA;YACAC;YACA;UACA,OACA;YACA;UACA;QACA;MACA,OACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","adminDto","oldPassword","newPassword","confirmPassword","form","created","methods","changeAdminPassword","localStorage"],"sourceRoot":"src/views/admin","sources":["ChangePassword.vue"],"sourcesContent":["<template>\n  <div style=\"width: 500px; padding: 20px; border: 1px solid #ccc\">\n    <el-form label-width=\"80px\" size=\"small\">\n\n      <el-form-item label=\"原密码\">\n        <el-input show-password v-model:label=\"oldPassword\" auto-complete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"新密码\">\n        <el-input show-password v-model:label=\"newPassword\" auto-complete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"确认密码\">\n        <el-input show-password v-model:label=\"confirmPassword\" auto-complete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"changeAdminPassword\">确 定</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"AdminChangePassword\",\n  data(){\n    return{\n      adminDto:{},\n      oldPassword:'',\n      newPassword:'',\n      confirmPassword:'',\n      form:{}\n\n    }\n  },\n  created() {\n    this.adminDto=JSON.parse(localStorage.getItem(\"admin\"))\n    if(this.admin==={}){\n      this.$router.push(\"/login\")\n    }\n  },\n  methods :{\n    changeAdminPassword(){\n      if(this.newPassword===this.confirmPassword) {\n        this.form.id=this.adminDto.id\n        this.form.oldPassword=this.oldPassword\n        this.form.newPassword=this.newPassword\n        this.request.post(\"http://localhost:9090/admin/changePassword\", this.form).then(res => {\n          if(res.code==='200'){\n            this.$message.success(\"修改成功\")\n            //退回到登录页面\n            localStorage.removeItem(\"admin\")\n            this.$router.push(\"/AdminLogin\")\n          }\n          else{\n            this.$message.error(res.msg)\n          }\n        })\n      }\n      else{\n        this.$message.error(\"两次输入密码不一致\")\n      }\n    }\n  }\n}\n</script>\n\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}